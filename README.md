# نظام التشغيل التعليمي - مستوحى من Linux Kernel 0.01

نظام تشغيل تعليمي بسيط مكتوب بلغة Assembly و C، مستوحى من Linux kernel 0.01 الأصلي. يهدف هذا المشروع إلى تعليم أساسيات أنظمة التشغيل من خلال تطبيق عملي.

## الميزات المضافة من Linux Kernel 0.01

### 1. إدارة المهام (Task Management)
- **هياكل البيانات للعمليات**: تعريف `task_struct` لتخزين معلومات المهام
- **إدارة حالة المهام**: تتبع حالات المهام (جاهز، قيد التشغيل، منتهي)
- **معرفات المهام**: نظام PID لتمييز المهام
- **إحصائيات المهام**: تتبع عدد المهام المنشأة والمكتملة

### 2. معالجة المقاطعات (Interrupt Handling)
- **جدول وصف المقاطعات (IDT)**: إعداد IDT مع 256 مدخل
- **معالجات المقاطعات (ISR)**: تطبيق معالجات للمقاطعات المختلفة
- **تسجيل المعالجات**: نظام لتسجيل معالجات مخصصة للمقاطعات
- **معالجة الاستثناءات**: معالجة أخطاء النظام والاستثناءات

### 3. إدارة الذاكرة البسيطة (Memory Management)
- **مخصص الذاكرة**: تطبيق `kmalloc` و `kfree` بسيط
- **تتبع الذاكرة**: مراقبة الذاكرة المستخدمة والمتاحة
- **كتل الذاكرة**: إدارة كتل الذاكرة مع معلومات الحجم والحالة
- **إحصائيات الذاكرة**: تتبع عمليات التخصيص والتحرير

### 4. نظام استدعاءات النظام (System Calls)
- **واجهة استدعاءات النظام**: تطبيق syscall interface
- **معالج استدعاءات النظام**: معالجة طلبات النظام
- **استدعاءات أساسية**: تطبيق استدعاءات مثل `sys_write` و `sys_exit`
- **تمرير المعاملات**: نظام لتمرير المعاملات للاستدعاءات

### 5. جدولة المهام (Task Scheduling)
- **جدولة دائرية**: تطبيق Round Robin scheduling
- **تبديل السياق**: آلية لتبديل بين المهام
- **قائمة المهام الجاهزة**: إدارة قائمة المهام المستعدة للتنفيذ
- **مؤقت الجدولة**: استخدام timer interrupt للجدولة

### 6. دعم لوحة المفاتيح (Keyboard Support)
- **معالج مقاطعات لوحة المفاتيح**: استقبال ومعالجة ضغطات المفاتيح
- **تحويل Scancode**: تحويل رموز المفاتيح إلى أحرف ASCII
- **مخزن مؤقت للوحة المفاتيح**: تخزين الإدخال للمعالجة اللاحقة
- **دعم المفاتيح الخاصة**: معالجة مفاتيح مثل Shift و Ctrl و Alt
- **إحصائيات لوحة المفاتيح**: تتبع ضغطات المفاتيح والأخطاء

## البنية التقنية

### معمارية النظام
- **المعمارية**: x86-64
- **وضع التشغيل**: Protected Mode
- **الإخراج**: VGA Text Mode (80x25)
- **الذاكرة**: إدارة ذاكرة بسيطة مع heap

### أدوات البناء
- **المجمع**: NASM (Netwide Assembler)
- **المترجم**: GCC
- **أداة البناء**: GNU Make
- **المحاكي**: QEMU

## البناء والتشغيل

### متطلبات النظام
```bash
sudo apt update
sudo apt install build-essential nasm qemu-system-x86
```

### بناء النظام
```bash
make clean
make
```

### تشغيل النظام
```bash
# تشغيل في التيرمنال
make run

# تشغيل في نافذة رسومية منفصلة
make run-gui
```

### تنظيف ملفات البناء
```bash
make clean
```

## هيكل المشروع

```
os/
├── boot/
│   └── boot.asm          # محمل الإقلاع (Bootloader)
├── kernel/
│   ├── kernel.asm        # نقطة دخول النواة
│   ├── kernel.c          # النواة الرئيسية
│   ├── kernel.h          # تعريفات النواة
│   ├── interrupt.c       # معالجة المقاطعات
│   ├── interrupt.h       # تعريفات المقاطعات
│   ├── task.c           # إدارة المهام
│   ├── task.h           # تعريفات المهام
│   ├── memory.c         # إدارة الذاكرة
│   ├── memory.h         # تعريفات الذاكرة
│   ├── syscall.c        # استدعاءات النظام
│   ├── syscall.h        # تعريفات استدعاءات النظام
│   ├── scheduler.c      # جدولة المهام
│   ├── scheduler.h      # تعريفات الجدولة
│   ├── keyboard.c       # دعم لوحة المفاتيح
│   └── keyboard.h       # تعريفات لوحة المفاتيح
├── build/               # ملفات البناء المؤقتة
├── Makefile            # ملف البناء
└── README.md           # هذا الملف
```

## الميزات التعليمية

### 1. التعليقات العربية
- جميع الكود مُعلق باللغة العربية لسهولة الفهم
- شرح مفصل للمفاهيم والخوارزميات

### 2. البساطة والوضوح
- كود مبسط وسهل القراءة
- تجنب التعقيدات غير الضرورية
- تركيز على المفاهيم الأساسية

### 3. التدرج في التعلم
- بناء تدريجي للميزات
- كل ميزة مستقلة ومفهومة
- إمكانية دراسة كل جزء منفصلاً

## الاختبار

### اختبار الميزات
1. **إدارة المهام**: النظام ينشئ ويدير مهام متعددة
2. **المقاطعات**: معالجة صحيحة للمقاطعات والاستثناءات
3. **الذاكرة**: تخصيص وتحرير الذاكرة بنجاح
4. **استدعاءات النظام**: تنفيذ استدعاءات النظام الأساسية
5. **الجدولة**: تبديل بين المهام بشكل صحيح
6. **لوحة المفاتيح**: استقبال ومعالجة إدخال المستخدم

### رسائل النظام
النظام يعرض:
- رسائل بدء التشغيل
- حالة تهيئة الميزات
- إحصائيات المهام والذاكرة
- معلومات لوحة المفاتيح
- رسائل التفاعل مع المستخدم

## التطوير المستقبلي

### ميزات مقترحة
- نظام ملفات بسيط
- دعم الشبكة الأساسي
- واجهة مستخدم رسومية
- دعم USB
- تحسين إدارة الذاكرة

### تحسينات ممكنة
- خوارزميات جدولة متقدمة
- إدارة ذاكرة افتراضية
- دعم معالجات متعددة
- أمان وحماية محسنة

## المراجع

- [Linux Kernel 0.01 Source Code](https://elixir.bootlin.com/linux/0.01/source)
- [OSDev Wiki](https://wiki.osdev.org/)
- [Intel 64 and IA-32 Architectures Software Developer's Manual](https://software.intel.com/content/www/us/en/develop/articles/intel-sdm.html)
- [NASM Documentation](https://www.nasm.us/docs.php)

## الترخيص

هذا المشروع مخصص للأغراض التعليمية. يمكن استخدامه وتعديله بحرية لأغراض التعلم والتطوير.

---

**ملاحظة**: هذا نظام تشغيل تعليمي مبسط وليس مخصصاً للاستخدام الإنتاجي. الهدف منه هو تعليم مفاهيم أنظمة التشغيل الأساسية.